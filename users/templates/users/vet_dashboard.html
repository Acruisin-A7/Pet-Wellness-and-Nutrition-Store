<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veterinarian Dashboard</title>
    {% load static %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'css/vet.css' %}">
</head>
<body>

<div class="d-flex">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="profile-container">
            {% if user.veterinarian.profile_photo %}
                <img src="{{ user.veterinarian.profile_photo.url }}" alt="Profile Photo" class="img-fluid rounded-circle profile-img">
            {% else %}
                <img src="https://via.placeholder.com/150" alt="No Profile Photo" class="img-fluid rounded-circle profile-img">
            {% endif %}
        </div>
        <a href="{% url 'update_vet_profile' %}">✏️ Update Profile</a>
        <a href="{% url 'manage_availability' %}" id="manageAvailability">⚙️ Manage Availability</a>
        <a href="{% url 'logout' %}" class="btn btn-danger">🚪 Logout</a>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        {% block content %}
        <div class="card shadow-lg p-4">
            <h2 class="welcome-text">Dr. {{ user.get_full_name }}</h2>

            <!-- Veterinarian Info -->
            <div class="mt-3">
                <h4 class="text-secondary">👨‍⚕️ Profile Details</h4>
                <ul class="list-group">
                    <li class="list-group-item"><strong>Email:</strong> {{ user.email }}</li>
                    <li class="list-group-item"><strong>License Number:</strong> {{ user.veterinarian.license_number }}</li>
                    <li class="list-group-item"><strong>Experience:</strong> {{ user.veterinarian.experience }} years</li>
                    <li class="list-group-item"><strong>Specialization:</strong> {{ user.veterinarian.specialization }}</li>
                    <li class="list-group-item"><strong>Clinic Address:</strong> {{ user.veterinarian.clinic_address }}</li>
                    <li class="list-group-item"><strong>Phone:</strong> {{ user.veterinarian.phone }}</li>
                </ul>
            </div>

            <!-- Availability -->
            <div class="mt-4">
                <h4 class="text-secondary">📅 Availability</h4>
                {% if user.veterinarian.vetavailability %}
                    <p><strong>Days:</strong> {{ user.veterinarian.vetavailability.available_days }}</p>
                    <p><strong>Time:</strong> {{ user.veterinarian.vetavailability.start_time }} - {{ user.veterinarian.vetavailability.end_time }}</p>
                {% else %}
                    <p class="text-muted">No availability set.</p>
                {% endif %}
            </div>

            <!-- Upcoming Appointments -->
            <div class="mt-4">
                <h4 class="text-secondary">📅 Upcoming Appointments</h4>
                {% if user.veterinarian.appointment_set.all %}
                    <ul class="list-group">
                        {% for appointment in user.veterinarian.appointment_set.all %}
                        <div class="appointment-item">
                            <p>- {{ appointment.date }} at {{ appointment.time_slot }}</p>
                            <a href="{% url 'cancel_appointment' appointment.id %}" class="btn cancel-cancel-btn">
                                <i class="fas fa-times"></i> Cancel
                            </a>
                        </div>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p class="text-muted">No upcoming appointments.</p>
                {% endif %}
            </div>
        </div>
        {% endblock %}
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
